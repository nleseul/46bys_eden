#:import PixelDisplay pyy_chr.ui.kivy.PixelDisplay

BoxLayout:
    orientation: 'vertical'

    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: None

        Button:
            text: 'Settings'
            size_hint: (None, None)
            on_release: app.open_settings()

        Button:
            text: 'Newline'
            size_hint: (None, None)
            on_release:
                text_input.insert_text('\n')
                text_input.focus = True

    ScrollView:
        id: text_scroll_hack
        TextInput:
            id: text_input
            size_hint_y: None
            height: max(self.minimum_height, text_scroll_hack.height)
            on_text: app.on_text_changed(self.text)
            on_cursor_row: app.scroll_to_line(self.cursor_row)


    BoxLayout:
        PixelDisplay:
            pixel_provider: app.pixel_provider
            #size: self.texture_size
            #size_hint: (None, None)
